!function a(){"use strict";var b,c={win:window,doc:document},d=c.doc.getElementsByTagName("head")[0],e=c.doc.createElement("script");return c.win.pwidget_modules?(c.pwModules=c.win.pwidget_modules,c.pwModules.define("utils",["util"],function(a){return a.getDocumentHeight=function(){var a=c.doc.body,b=c.doc.documentElement;return Math.max(a.scrollHeight,b.scrollHeight,a.offsetHeight,b.offsetHeight,a.clientHeight,b.clientHeight)},a.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)}}(),a.cancelAnimationFrame=function(a){window.cancelAnimationFrame?window.cancelAnimationFrame(a):clearTimeout(a)},a.toPositive=function(b){return a.toInt(0>b?-1*b:b)},a.getElementsByAttr=function(a,b){var c,d,e,f=[];for(c=(b||document).getElementsByTagName("*"),d=0;e=c[d];d++)e.getAttribute(a)&&f.push(e);return f},a.isNumber=function(a){return"number"==typeof a},a.mergeObjectsEx=function(b,c,d){var e,f;a.isObject(c)||(c=b.constructor===Array?[]:{}),c.constructor===Array&&(c=[]);for(e in b)f=b[e],a.hasProperty(b,e)&&(d&&"on"!==e.substr(0,2)||!d)&&(c[e]="object"!=typeof f||a.isDOMElement(f)?f:a.mergeObjects(f,c[e],d));return c},a.cloneObjEx=function(b){var c;if(null==b||"object"!=typeof b||a.isDOMElement(b))return b;if(b instanceof Date)return c=new Date,c.setTime(b.getTime()),c;if(b instanceof Array){c=[];for(var d=0,e=b.length;e>d;d++)c[d]=a.cloneObjEx(b[d]);return c}if(b instanceof Object){c={};for(var f in b)b.hasOwnProperty(f)&&(c[f]=a.cloneObjEx(b[f]));return c}throw new Error("Unable to copy obj! Its type isn't supported.")},a}),c.pwModules.define("dict",{show:{scrollStart:"scroll.start",scrollEnd:"scroll.end",pageReady:"page.ready",afterArticle:"afterArticle"}}),c.pwModules.define("config",{classes:{domNodePrefix:"r1sp--",positionPrefix:"position_",lightboxOverlay:"r1sp-overlay",userDefinedClose:"close-invasive",activeClass:"r1sp--active",noanim:"r1sp--noanim",mobile:"r1sp-mobile-",setMobile:"r1sp-setmobile-"},typeClasses:{lightbox:"lightbox",toolbar:"toolbar"},positionClasses:{bottom:"bottom","bottom-right":"bottom-right","bottom-left":"bottom-left",top:"top","top-left":"top-left","top-right":"top-right"},effects:{slide:"slide","slide-bottom":"slide-bottom","slide-top":"slide-top","slide-left":"slide-left","slide-right":"slide-right",fade:"fade"},defaults:{},templates:{domNode:'<div class="r1sp__content">{{userContent}}</div>',widget:'<div id="{{widgetID}}"></div>'}}),c.pwModules.define("userConfig",["utils","dict","config","env"],function(a,b,d,e){var f={widgetPublisherKey:void 0,customStyles:{},template:'<a class="r1sp__close" data-action="close"></a><div class="r1sp__share-inl">Share with friends:</div>{{widget}}',position:d.positionClasses.bottom,post_widget:{buttons:[]},type:d.typeClasses.toolbar,show:b.show.scrollEnd,overlay:!1,offset_position:{bottom:20,right:20,left:20,top:20},effect:void 0,offset_show:0,skin:"default",onShow:null,onHide:null,onClose:null,mobile:{template:'<div class="r1sp__def-mv"><div class="r1sp__def-mv__prepend">Share:</div><div class="r1sp__def-mv__widget">{{widget}}</div><div class="r1sp__def-mv__append"><a class="r1sp__close" data-action="close"></a></div>',type:d.typeClasses.toolbar,overlay:!1,position:d.positionClasses.bottom,offset_position:{bottom:0,right:0,left:0,top:0},post_widget:{buttons:[{id:"facebook",look:"native"},{id:"twitter",look:"native"},{id:"linkedin",look:"native"},{id:"mail",look:"native"},{id:"post-share",look:"native"}],size:"xlarge",counter:"none"}}},g=a.cloneObjEx(f);return{val:function(b){return a.prop(f,b)},setSPConfig:function(b){var d,h=a.cloneObjEx(a.isDefined(b)?b:c.win.sharePromptConfig);return d=e.isMobile&&h.mobile,f=a.mergeObjectsEx(h,f),f=d===!0?a.mergeObjectsEx(g.mobile,f):a.mergeObjectsEx(d,f),void 0===h.mobile?(f.enableMobile=!0,f.setmobile=!1):(f.enableMobile=!!d,f.setmobile=!!d),this},setDefaultProperties:function(){return f=a.cloneObjEx(g),this}}}),void c.pwModules.require(["utils","dom","userConfig","config","dict","pwConfig","env"],function(a,b,d,e,f,g,h){var i;i={domNode:void 0,overlayNode:void 0,closePopupNode:void 0,scrollInterval:void 0,didScroll:void 0,domNodeStyles:void 0,init:function(e){var g=this;a.bindAll(this,["onDocumentScroll","onClosePopupNode","remove"]),d.setSPConfig(e),(d.val("enableMobile")||!h.isMobile)&&this.createDomNode(function(){d.val("show")===f.show.pageReady?g.showDomNode():(b.addEvent(c.win,"scroll",g.onDocumentScroll),b.getScrollPosition().y>0&&(g.didScroll=!0),g.scrollInterval=setInterval(function(){g.didScroll&&(g.didScroll=!1,g.render())},600))})},onDocumentScroll:function(){this.didScroll=!0},render:function(){var c,e,g,i,j=b.getScrollPosition().y,k=d.val("show"),l=d.val("offset_show"),m=b.getWindowHeight(),n=a.getDocumentHeight(),o=h.isMobile?h.isMobile.tablet?2:3:0;a.isNumber(l)||(a.isString(l)?(c=Number(l.replace("%","")),l=n*c/100):a.isFunction(l)&&(l=l())),a.isString(k)&&-1!==k.indexOf("%")?(e=Number(k.replace("%","")),k=n*e/100):a.isFunction(k)&&(k=k()),a.isNumber(k)&&(k>n-(m+o)&&(k=f.show.scrollEnd),j>=k?this.showDomNode():this.hideDomNode()),a.isObject(k)&&(g=a.prop(k,"afterElement"))&&(i=b.getElementOffset(g).top+b.getElementSize(g).height+l,j>=i?this.showDomNode():i>j&&this.hideDomNode()),k===f.show.scrollEnd&&(j+(m+o)-l>=n?this.showDomNode():this.hideDomNode()),k===f.show.scrollStart&&j>0&&this.showDomNode()},createDomNode:function(f){var g=d.val("type"),i=d.val("position"),j=(d.val("skin"),d.val("overlay")),k=this,l=[],m={},n=d.val("effect"),o="r1sp-pwwidget_"+parseInt(99999999*Math.random()),p=a.template(d.val("template"),{widget:e.templates.widget}),q=this.getDirection();return l.push(e.classes.domNodePrefix+e.typeClasses[g]),g===e.typeClasses.toolbar&&l.push(e.classes.domNodePrefix+e.classes.positionPrefix+e.positionClasses[i]),l.push(e.classes.domNodePrefix+d.val("skin")),this.domNode=b.createElement("div",{className:l.join(" "),style:d.val("customStyles")||{},innerHTML:a.template(e.templates.domNode,{userContent:p,widgetID:o})}),b.appendTo("body",this.domNode),g===e.typeClasses.lightbox&&j&&(this.overlayNode=b.createElement("div",{className:e.classes.lightboxOverlay}),b.appendTo("body",this.overlayNode)),c.win.post_widget("#"+o,a.cloneObj(d.val("post_widget"))),a.each(a.getElementsByAttr("data-action",this.domNode),function(a,c){"close"===b.attr(c,"data-action")&&b.addEvent(c,"click",k.onClosePopupNode,!0)}),this.cssReady(function(){q&&g===e.typeClasses.toolbar&&(b.display(k.domNode),-1!==a.indexOfArray(["top","bottom"],q)?m[q]="-"+(b.getElementSize(k.domNode).height+30)+"px":-1!==a.indexOfArray(["left","right"],q)&&(m[q]="-"+(b.getElementSize(k.domNode).width+30)+"px",-1!==i.indexOf("bottom")?m.bottom=d.val("offset_position.bottom"):-1!==i.indexOf("top")&&(m.top=d.val("offset_position.top"))),b.setStyle(k.domNode,m),k.domNodeStyles=m),q?b.addClass(k.domNode,e.classes.domNodePrefix+e.effects.slide+"-"+q):n===e.effects.fade&&b.addClass(k.domNode,e.classes.domNodePrefix+e.effects.fade)}),b.addClass("html",e.classes.mobile+!!h.isMobile),b.addClass("html",e.classes.setMobile+!!d.val("setmobile")),a.isFunction(f)&&f(),this},onClosePopupNode:function(){this.hideDomNode(this.remove),d.val("onClose")&&d.val("onClose")()},cssReady:function(d){var e,f,g,h,i=this,j={fontSize:"1px",lineHeight:"1px",width:"1px",height:"1px"};e=b.createElement("div",{className:"pw-test-uploadcss",style:j}),f=b.createElement("div",{className:"r1sp-test-uploadcss",style:j}),b.getBy(".pw-test-uploadcss")[0]||b.getBy(".r1sp-test-uploadcss")[0]?a.isFunction(d)&&d():(c.doc.getElementsByTagName("body")[0].appendChild(e),c.doc.getElementsByTagName("body")[0].appendChild(f),(g=function k(){var c=b.getBy(".pw-icon",i.domNode)[0];c?(h=function g(){12!==e.offsetHeight&&14!==e.offsetWidth||12!==f.offsetHeight&&14!==f.offsetWidth?setTimeout(g,200):a.isFunction(d)&&d()})():setTimeout(k,200)})())},showDomNode:function(){var c={},f=d.val("offset_position"),g=d.val("position"),h=d.val("type"),i=this;return b.classList(i.domNode,e.classes.activeClass)||b.addClass(i.domNode,e.classes.activeClass),i.overlayNode&&b.display(i.overlayNode),h===e.typeClasses.toolbar&&a.each(f,function(b,d){a.isUndefined(d)||-1===g.indexOf(b)||(c[b]=d+"px")}),a.isObjEmpty(c)||b.setStyle(i.domNode,c),this},hideDomNode:function(c){var f=d.val("effect");return f===e.effects.fade&&(b.classList(this.domNode,e.classes.domNodePrefix+e.effects.fade)||b.addClass(this.domNode,e.classes.domNodePrefix+e.effects.fade)),b.classList(this.domNode,e.classes.activeClass)&&b.replaceClass(this.domNode," "+e.classes.activeClass,""),this.overlayNode&&b.display(this.overlayNode,"hide"),a.isObjEmpty(this.domNodeStyles)||b.setStyle(this.domNode,this.domNodeStyles),c&&c(),this},remove:function(a){b.removeEvent(c.win,"scroll",this.onDocumentScroll),b.removeNode(this.domNode),this.overlayNode&&b.removeNode(this.overlayNode),this.domNode=void 0,b.removeNode(b.getBy(".pw-test-uploadcss")[0]),b.removeNode(b.getBy(".r1sp-test-uploadcss")[0]),a||d.setDefaultProperties(),clearInterval(this.scrollInterval)},getDirection:function(){var a,b,c,f=d.val("position"),g=d.val("effect"),h=d.val("offset_position");return f&&g&&(b=f.split("-"),a=g.split("-"),c=a[1]&&h[a[1]]?a[1]:a[0]===e.effects.slide?b[1]||b[0]:void 0),c},sharePromptJsApi:function(){return{changeConfig:function(b){i.domNode&&i.remove(!0),i.init(a.isObject(b)?b:{})},activate:function(b){i.domNode&&i.remove(),i.init(a.isObject(b)?b:{})},deactivate:function(){i.domNode&&i.remove()},show:function(){return i.domNode?(i.showDomNode(),void(d.val("onShow")&&d.val("onShow")())):!1},hide:function(){i.domNode&&i.hideDomNode(),d.val("onHide")&&d.val("onHide")()}}}},window.sharePromptJsApi=i.sharePromptJsApi(),b.ready(function(){i.init()})})):(c.win.pwidget_config={copypaste:!1,shareQuote:!1},b=c.win.sharePromptConfig.widgetPublisherKey||"",e.src="http://i.po.st/static/script/post-widget.js#publisherKey="+b+"&init=lazy",e.onreadystatechange=function(){"complete"===this.readyState&&a()},e.onload=function(){a()},void d.appendChild(e))}();